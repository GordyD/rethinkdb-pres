<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Rethinking Hiring: Workshape.io's journey with RethinkDB</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
		
		<link rel="stylesheet" href="fonts/stylesheet.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">
		<link rel="stylesheet" href="css/pres.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<img class="splash" height="110" data-src="images/title.png" alt="Rethinking Hiring">
					<h4 class="lowercase">Workshape.io's journey with RethinkDB</h4>
					<p>
						<small><a href="http://www.gordondent.co.uk">Gordon Dent</a> / <a href="http://www.workshape.io">workshape.io</a> / <a href="http://twitter.com/gordymd">@gordyMD</a></small>
					</p>
					<img class="splash" width="946" height="416" data-src="images/splash.png" alt="Splash">
					<aside class="notes">
						<ul>
							<li>Welcome</li>
							<li>I'm Gordon, CTO of Workshape.io</li>
							<li>I'm here to talk to you about our experiences of using RethinkDB in production</li>
							<li>As an overview I am going to talk about:</li>
							<li>Who I am</li>
							<li>What Workshape is</li>
							<li>why we chose RethinkDB</li>
							<li>how we currently use RethinkDB</li>
							<li>how we intend to use RethinkDB in the future</li>
							<li>You can find me on twitter @GordyMD if you want to connect</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/setting-scene.png" alt="Setting the Scene">
					<aside class="notes">
						<ul>
							<li>Been a Software Engineer for 10 years</li>
							<li>Most of my time has been spent working with PostgreSQL, MySQL powered applications</li>
							<li>Grown an increasing frustration RDBMS and issues around the use of ORMs and performing migrations and scaling up a DB</li>
							<li>Previously was hesitant to adopt NoSQL - MongoDB/Couchbase as viable options</li>
							<li>Due to Poor Query language, non-relational</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="150" data-src="images/banner-reversed.png" alt="Workshape.io">
					<ul>
						<li>Hiring platform for Engineers</li>
						<li>Idea in 2013 / Launch in 2014</li>
						<li>14k engineers / 500 companies</li>
						<li>15% growth month-on-month</li>
					</ul>
					<div>
						<img class="splash portrait" height="130" data-src="images/gordon.png" alt="Workshape.io">
						<img class="splash portrait" height="130" data-src="images/hung.png" alt="Workshape.io">
						<img class="splash portrait" height="130" data-src="images/tanc.png" alt="Workshape.io">
					</div>
					<aside class="notes">
						<ul>
							<li>Founded by myself, Tancredi, Hung, we met at a previous startup</li>
							<li>We're rethinking hiring</li>
							<li>Born out of the collective frustration weâ€™ve had with hiring and being hired</li>
							<li>We are a talent matching platform for sofrware engineers</li>
							<li>We optimise the initial hiring conversation by matching developer to opportunity based on what they want to do next</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/new-beginning.png" alt="A New Beginning">
					<aside class="notes">
						<ul>
							<li>Fresh from our experiences in other London startups</li>
							<li>Key factors to us all in choosing technology and setting company culture were:</li>
							<li>Flexibility</li>
							<li>Fast Iteration</li>
							<li>Fun!</li>
							<li>All without sacrificing power!</li>
						</ul>
					</aside>
				</section>
				<section data-autoslide="500">
					<img class="splash" height="110" data-src="images/decisions.png" alt="Decisions, Decisions">
					<div>
						<img class="fragment splash" height="100" data-src="images/postgresql.png" data-fragment-index="7" data-autoslide="450">
						<img class="fragment splash" height="100" data-src="images/mysql.png" data-fragment-index="1" data-autoslide="450">
					</div>
					<div>
						<img class="fragment splash" height="100" data-src="images/mongodb.png" data-fragment-index="8" data-autoslide="450">
						<img class="fragment splash" height="100" data-src="images/couchdb.png" data-fragment-index="10" data-autoslide="30000">
						<img class="fragment splash" height="100" data-src="images/rethinkdb-logo.png" data-fragment-index="4" data-autoslide="450">
					</div>
					<div>
						<img class="fragment splash" height="100" data-src="images/neo4j.png" data-fragment-index="6" data-autoslide="450">
						<img class="fragment splash" height="100" data-src="images/titandb.png" data-fragment-index="9" data-autoslide="450">
						<img class="fragment splash" height="100" data-src="images/orientdb.png" data-fragment-index="5" data-autoslide="450">
					</div>
					<div>
						<img class="fragment splash" height="100" data-src="images/cassandra.jpeg" data-fragment-index="3" data-autoslide="450">
						<img class="fragment splash" height="100" data-src="images/redis.png" data-fragment-index="2" data-autoslide="450">
					</div>
					<aside class="notes">
						<ul>
							<li>The database market is a crowded space</li>
							<li>With Relational, document, graph based and and key value stores out there</li>
							<li>A lot choice on the table</li>
							<li>But with our key focuses</li>
							<li>RethinkDB stood out</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/rethinkdb2013.png" alt="RethinkDB in 2013!">
					<img class="splash" height="550" data-src="images/screen-shot.png" alt="Wayback then!">
					<aside class="notes">
						<ul>
							<li>Back in 2013  when were prototyping the RethinkDB homepage looked like this...</li>
							<li>Website that spoke to me as an engineer and showed me the key facets of the DB</li>
							<li>Really outlined key factors and convinced me to try it out and get a feel for it</li>
							<li>The focus on Developer Experience was a key component</li>
							<li>Let's talk about some of it's key features that sealed the deal...</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/schema.png" alt="Go away Schema!">
					<img class="splash" height="550" data-src="images/no_schema.png" alt="Right now!">
					<aside class="notes">
						<ul>
							<li>One of the core tennants of document stores is that you can store whatever documents you want, with any structure</li>
							<li>The lack of requirement to reason ahead of time about data modelling was a strong initial consideration for us</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/embedded.png" alt="Ooo, Embedded Query Language">
					<pre><code class="javascript hljs">
	r
	.db( 'wsdev' )
	.table( 'matches' )
	.getAll( 'isnt-this-nice', { index: 'organisation_id' } )
	.filter( row => row( 'expiry' ).gt( r.now() ) )
	.orderBy( r.desc( 'score' ) )
	.limit( 10 )
					</code></pre>
					<aside class="notes">
						<ul>
							<li>What complimented this perfectly though was the fact that you could write queries using an query API in your language of choice</li>
							<li>This minimised the amount of context switching, prevalent when working with raw SQL</li>
							<li>It had the ease of use of an ORM but with zero obfuscation of an underlying Query Language</li>
							<li>It's there at your fingertips, in many languages, officially supported in Javascript, Ruby, Python, and soon Java</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/other-data.png" alt="Other data can join in too!">
					<pre><code class="javascript hljs">
	r
	.db( 'wsdev' )
	.table( 'matches' )
	.getAll( 'isnt-it-just', { index: 'organisation_id' } )
	.filter( row => row( 'expiry' ).gt( r.now() ) )
	.eqJoin( 'person_id', r.table('person'))
	.pluck({ 
	  left: [ 'id', 'score', 'created', 'person_id' ], 
	  right: [ 'first_name', 'last_name', 'title' ]
	})
	.zip()
	.orderBy( r.desc( 'score' ) )
	.limit( 10 )
					</code></pre>
					<aside class="notes">
						<ul>
							<li>Unlike other document stores where you have to either nest data, or just make 2 queries to the DB, the convenience of joins was another selling point</li>
						</ul>
					</aside>
				</section>
				
				
				<section>
					<img class="splash" height="110" data-src="images/not-to-mention.png" alt="Not to mention...">
					<ul>
						<li>Horizontal Scaling</li>
						<li>Geospatial Functionality</li>
						<li>Powerful Admin Tool</li>
					</ul>
					<aside class="notes">
						<ul>
							<li>Other components that influenced our decision were...</li>
							<li>The ease of scaling was another worthy highlight but not immediate to our concerns</li>
							<li>Although, having experience scaling up MySQL and PostgreSQL clusters, the simplicity of this is incredible</li>
							<li>Geospatial functionality being present was very important for leveraging ReQL to handle the weight of our matching algorithm</li>
							<li>The clean, simple, but powerful GUI was a nice to have too</li>
						</ul>
					</aside>
				</section>
				<section  data-autoslide="2500">
					<img class="splash" height="350" data-src="images/dx.png" alt="Developer Experience!">
					<img class="splash dx1 fragment" height="30" data-src="images/Community.png" alt="Developer Experience!"  data-autoslide="850" data-fragment-index="1">
					<img class="splash dx2 fragment" height="30" data-src="images/Support.png" alt="Developer Experience!"  data-autoslide="850" data-fragment-index="2">
					<img class="splash dx3 fragment" height="30" data-src="images/Usability.png" alt="Developer Experience!"  data-autoslide="850" data-fragment-index="3">
					<img class="splash dx4 fragment" height="25" data-src="images/Education.png" alt="Developer Experience!"  data-autoslide="850" data-fragment-index="4">
					<img class="splash dx5 fragment" height="25" data-src="images/Documentation.png" alt="Developer Experience!"  data-autoslide="30050" data-fragment-index="5">
					<aside class="notes">
						<ul>
							<li>It was clear to me that Developer Experience was at the heart of RethinkDB</li>
							<li>Much like Workshape.io RethinkDB put the developer first</li>
							<li>Even their website was optimised to encourage usage right from the beginning, to learn from the experience</li>
							<li>If you haven't done this yourself I'd really encourage it</li>
						</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/first-setup.png" alt="Our First Setup">
					<img class="splash" height="480" data-src="images/old-infra.png" alt="First Setup Diagram">
					<ul>
					</ul>
					<aside class="notes">
							<ul>
								<li>Our first setup was initially in Amsterdam, because Digital Ocean did not have a London data-center</li>
								<li>We ran a 2 node cluster for RethinkDB with one box just operating as a DB server</li>
								<li>And another operating as a worker and backup manager</li>
								<li>We set up our infrastructure using IP tables, as specified in RethinkDBs docs</li>
								<li>We use ansible to orchestrate our setup</li>
							</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/current-setup.png" alt="Our Current Setup">
					<img class="splash" height="480" data-src="images/current-infra.png" alt="Current Setup Diagram">
					<aside class="notes">
							<ul>
								<li>Whereas today we are hosted in London</li>
								<li>4 node cluster with 1 proxy and 3 dbs</li>
								<li>The proxy node acts as an optimiser that reduces intra-cluster traffic</li>
							</ul>
					</aside>
				</section>
				<section>
					<img class="splash" height="110" data-src="images/current-usage.png" alt="Out Current Usage">
					<img class="splash" height="550" data-src="images/gui.png" alt="GUI Screenshot">
					<aside class="notes">
							<ul>
								<li>This is a recent screenshot taken showing the admin tool reporting clister performance information</li>
								<li>You can see from the graph we are read heavy, like most web applications</li>
								<li>Our database is stil relatively small with around 2.2GB of disk used</li>
								<li>We have 21 tables</li>
								<li>Around 500k documents stored</li>
								<li>We use 31 different secondary on-top of the default primary ones that exist to optimise certain queries</li>
								<li>The benefits of this are reaped in our matching algorithm where use a geo based secondary index for quickly focussing the match algorithm upon a subset of matches able looking for work in the area</li>
							</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/lessons.png" alt="Lessons Learned!">
					<ul>
						<li>2GB RAM + SWAP</li>
						<li>Use secondary indexes and getAll()</li>
						<li>Avoid innerJoin() and outerJoin()</li>
						<li>Nested vs Relational</li>
					</ul>
					<aside class="notes">
						<ul>
							<li>One of the rookie mistakes when setting up our DB servers the first time was not setting up swap!</li>
							<li>More of an issue with cloud services than rethinkDB but important if you don't want your process to crash when mem runs out!</li>
							<li>Whenever possible user secondary indexes and getAll over filter</li>
							<li>With the relatively cheap cost of increased storage required and write speed, you get drastically improved query times</li>
							<li>Use these eagerly to make your system as fast as possible</li>
							<li>Avoid the use of innerJoin() and outerJoin()</li>
							<li>It is misleading that these are part of the API as they are very slow functions</li>
							<li>It is hard to decide when to use nested data or relational data, and where the boundary is, especially as your database grows</li>
							<li>r.http() is a great function for prototyping and working with APIs, worth checking out!</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/rethinkdb-today.png" alt="RethinkDB Today!">
					<img class="splash" height="550" data-src="images/screen-shot2.png" alt="Right now!">
					<aside class="notes">
						<ul>
							<li>This is RethinkDB today</li>
							<li>With the focus shifted towards the realtime capabilities</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/changefeed-api.png" alt="Changefeed API">
					<pre><code class="javascript hljs">
  db.changes(
    r.table('account').filter({type: 'person'}),
    function(err, x) {
      if (!x.old_val) {
        emit('new-person', x.new_val);
      }
    }
  );
					</code></pre>
					<aside class="notes">
						<ul>
							<li>The introduction of Changefeeds, which at first was meant for integration for other realtime systems, was a very exciting development</li>
							<li>Whilst we use the feature on our Analytics, we plan to adapt more of this functionality in the future to power more realtime aspects our site: match notifications,
							messages, user online presence, inline updates to match scores</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/graph-ql.png" alt="A GraphQL Extension?">
					
					<aside class="notes">
						<ul>
							<li>There has been talk RethinkDB's Github Issues about options for a GraphQL extension</li>
							<li>Whilst how this concludes is yet to be determined, this kind of dialogue with the community captures the core essence of RethinkDB</li>
							<li>It is very exciting to see the technology evolve and respond to changes in other areas of software development</li>
						</ul>
					</aside>
				</section>

				<section>
					<img class="splash" height="110" data-src="images/3ree-stack.png" alt="The 3REE Stack">
					<div>
						<ul>
							<li>React</li>
							<li>Redux</li>
							<li>RethinkDB</li>
							<li>Express</li>
						</ul>
					</div>
					<p>
						<small><a href="https://github.com/gordyd/3ree">https://github.com/GordyD/3ree</a></small>
					</p>
					
					<aside class="notes">
						<ul>
							<li>I wrote a blog post a few weeks ago about a potential stack that we are looking to adopt.</li>
							<li>It brings together the 3 Re's of the Javascript world that all have strong focus on Developer Experience</li>
							<li>With this being something we attach a lot of importance in.</li>
							<li>We are very excited to begin refactoring towards this approach.</li>
						</ul>
					</aside>
				</section>

				<section>
					<h3 class="lowercase">Thank you for listening</h3>
					<p>
						<small><a href="http://www.gordondent.co.uk">Gordon Dent</a> / <a href="http://www.workshape.io">workshape.io</a> / <a href="http://twitter.com/gordymd">@gordyMD</a></small>

					</p>
					<img class="splash rounded" height="282" data-src="images/workshape-logo.png" alt="Workshape Logo">
					<aside class="notes">
						<ul>
							<li>Thank you for listening</li>
							<li>You can find me on Twitter at @GordyMD or you can hit me up on workshape.io</li>
						</ul>
    			</aside>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				fragments: true,
				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
